// Translations for English and Russian
const translations = {
    en: {
        // Common
        loading: "Loading...",
        noRecentActivity: "No recent activity",
        cancel: "Cancel",
        save: "Save",
        actions: "Actions",
        
        // Dashboard
        dashboard: "Dashboard",
        totalRevenue: "Total Revenue",
        vsLastWeek: "↑ 12% vs last week",
        lowStockItems: "Low Stock Items",
        itemsToRestock: "Items to restock",
        profitMargin: "Profit Margin",
        addSale: "➕ Add Sale",
        addExpense: "➕ Add Expense",
        salesTrendLastWeek: "Sales Trend (Last 7 Days)",
        recentActivity: "Recent Activity",
        
        // Navigation
        products: "Products",
        stock: "Stock",
        sales: "Sales",
        expenses: "Expenses",
        suppliers: "Suppliers",
        ingredients: "Ingredients",
        writeoffs: "Write-offs",
        documentation: "Documentation",
        
        // Products
        addProduct: "Add Product",
        searchProducts: "Search products...",
        productName: "Name",
        price: "Price",
        ingredientsList: "Ingredients",
        selectIngredient: "Select Ingredient...",
        addIngredient: "Add",
        recipe: "Recipe (Ingredients)",
        saveProduct: "Save Product",
        
        // Ingredients
        addIngredientButton: "Add Ingredient",
        searchIngredients: "Search ingredients...",
        ingredientName: "Ingredient Name",
        baseUnit: "Base Unit",
        saveIngredient: "Save Ingredient",
        
        // Stock
        addStockItem: "Add Stock Item",
        searchStock: "Search stock...",
        stockItemName: "Item Name",
        category: "Category",
        quantity: "Quantity",
        unit: "Unit",
        initialQuantity: "Initial Quantity",
        saveStockItem: "Add Item",
        
        // Sales
        newSale: "New Sale",
        searchSales: "Search sales...",
        date: "Date",
        product: "Product",
        selectProduct: "Select Product",
        quantityPcs: "Quantity (pcs)",
        discount: "Discount (%)",
        total: "Total",
        registerSale: "Register Sale",
        
        // Expenses
        addExpenseButton: "Add Expense",
        searchExpenses: "Search expenses...",
        expenseType: "Type",
        expenseCategory: "Category",
        amount: "Amount (₽)",
        supplier: "Supplier",
        optionalSupplier: "Supplier (Optional)",
        saveExpense: "Save Expense",
        
        // Suppliers
        addSupplier: "Add Supplier",
        searchSuppliers: "Search suppliers...",
        companyName: "Company Name",
        contactPerson: "Contact Person",
        phone: "Phone",
        email: "Email",
        address: "Address",
        contact: "Contact",
        saveSupplier: "Save Supplier",
        
        // Write-offs
        addWriteoff: "Add Record",
        searchWriteoffs: "Search write-offs...",
        itemType: "Item Type",
        selectItem: "Select Item",
        reason: "Reason",
        recordWriteoff: "Record Write-off",
        itemTypeProduct: "Product",
        itemTypeStock: "Stock Item",
        
        // Language Switch
        language: "Language",
        english: "English",
        russian: "Русский",
    },
    ru: {
        // Common
        loading: "Загрузка...",
        noRecentActivity: "Нет недавней деятельности",
        cancel: "Отмена",
        save: "Сохранить",
        actions: "Действия",
        
        // Dashboard
        dashboard: "Панель управления",
        totalRevenue: "Общие доходы",
        vsLastWeek: "↑ 12% по сравнению с прошлой неделей",
        lowStockItems: "Товары с низким запасом",
        itemsToRestock: "Товаров для пополнения",
        profitMargin: "Рентабельность",
        addSale: "➕ Добавить продажу",
        addExpense: "➕ Добавить расход",
        salesTrendLastWeek: "Тренд продаж (последние 7 дней)",
        recentActivity: "Недавняя деятельность",
        
        // Navigation
        products: "Товары",
        stock: "Запасы",
        sales: "Продажи",
        expenses: "Расходы",
        suppliers: "Поставщики",
        ingredients: "Ингредиенты",
        writeoffs: "Списания",
        documentation: "Документация",
        
        // Products
        addProduct: "Добавить товар",
        searchProducts: "Поиск товаров...",
        productName: "Название",
        price: "Цена",
        ingredientsList: "Ингредиенты",
        selectIngredient: "Выбрать ингредиент...",
        addIngredient: "Добавить",
        recipe: "Рецепт (Ингредиенты)",
        saveProduct: "Сохранить товар",
        
        // Ingredients
        addIngredientButton: "Добавить ингредиент",
        searchIngredients: "Поиск ингредиентов...",
        ingredientName: "Название ингредиента",
        baseUnit: "Базовая единица",
        saveIngredient: "Сохранить ингредиент",
        
        // Stock
        addStockItem: "Добавить товар на складе",
        searchStock: "Поиск на складе...",
        stockItemName: "Название товара",
        category: "Категория",
        quantity: "Количество",
        unit: "Единица",
        initialQuantity: "Начальное количество",
        saveStockItem: "Добавить товар",
        
        // Sales
        newSale: "Новая продажа",
        searchSales: "Поиск продаж...",
        date: "Дата",
        product: "Товар",
        selectProduct: "Выбрать товар",
        quantityPcs: "Количество (шт)",
        discount: "Скидка (%)",
        total: "Итого",
        registerSale: "Зарегистрировать продажу",
        
        // Expenses
        addExpenseButton: "Добавить расход",
        searchExpenses: "Поиск расходов...",
        expenseType: "Тип",
        expenseCategory: "Категория",
        amount: "Сумма (₽)",
        supplier: "Поставщик",
        optionalSupplier: "Поставщик (необязательно)",
        saveExpense: "Сохранить расход",
        
        // Suppliers
        addSupplier: "Добавить поставщика",
        searchSuppliers: "Поиск поставщиков...",
        companyName: "Название компании",
        contactPerson: "Контактное лицо",
        phone: "Телефон",
        email: "Email",
        address: "Адрес",
        contact: "Контакт",
        saveSupplier: "Сохранить поставщика",
        
        // Write-offs
        addWriteoff: "Добавить запись",
        searchWriteoffs: "Поиск списаний...",
        itemType: "Тип товара",
        selectItem: "Выбрать товар",
        reason: "Причина",
        recordWriteoff: "Зарегистрировать списание",
        itemTypeProduct: "Товар",
        itemTypeStock: "Товар на складе",
        
        // Language Switch
        language: "Язык",
        english: "English",
        russian: "Русский",
    }
};

// Current language
let currentLanguage = localStorage.getItem('language') || 'en';

// Get translation
function t(key) {
    return translations[currentLanguage][key] || translations['en'][key] || key;
}

// Switch language
function switchLanguage(lang) {
    if (translations[lang]) {
        currentLanguage = lang;
        localStorage.setItem('language', lang);
        updatePageLanguage();
        updateLanguageButtons();
    }
}

// Update language button styling
function updateLanguageButtons() {
    document.getElementById('lang-en')?.classList.toggle('active', currentLanguage === 'en');
    document.getElementById('lang-ru')?.classList.toggle('active', currentLanguage === 'ru');
}

// Update all translatable elements on the page
function updatePageLanguage() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
            if (el.placeholder) el.placeholder = t(key);
        } else if (el.tagName === 'OPTION') {
            el.textContent = t(key);
        } else {
            el.textContent = t(key);
        }
    });
    
    // Update page title
    const activeTab = document.querySelector('.nav-btn.active');
    if (activeTab) {
        document.getElementById('page-title').innerText = t(activeTab.getAttribute('data-i18n') || activeTab.innerText);
    }
    
    // Update html lang attribute
    document.documentElement.lang = currentLanguage;
}

// Initialize translations on page load
document.addEventListener('DOMContentLoaded', () => {
    updatePageLanguage();
    updateLanguageButtons();
});
