"""
–ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢: –¢–ï–°–¢–´ PYTEST –î–õ–Ø BAKERY MANAGER API

–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: –Ø–Ω–≤–∞—Ä—å 2026
–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
"""

# SUMMARY

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ pytest –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Bakery Manager API.

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–æ: 33 —Ç–µ—Å—Ç–∞
üìù –í—Å–µ–≥–æ —Å–æ–∑–¥–∞–Ω–æ —Ç–µ—Å—Ç–æ–≤: 123+
üìÅ –§–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏: 13
üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 4 —Ñ–∞–π–ª–∞

## üéØ –†–ê–ë–û–ß–ò–ï –¢–ï–°–¢–´ (–ì–û–¢–û–í–´–ï –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ)

### 1. test_database.py - 6 —Ç–µ—Å—Ç–æ–≤ ‚úÖ
   - test_database_initialization
   - test_units_exist
   - test_stock_categories_exist
   - test_create_product_entity
   - test_create_stock_item_entity
   - test_relationships

### 2. test_main.py - 9 —Ç–µ—Å—Ç–æ–≤ ‚úÖ
   - test_root_route
   - test_management_route
   - test_pos_route
   - test_app_has_required_routers
   - test_static_files_mounted
   - test_app_title
   - test_invalid_route
   - test_invalid_api_method
   - test_nonexistent_resource

### 3. test_api_endpoints.py - 7 —Ç–µ—Å—Ç–æ–≤ ‚úÖ
   - test_products_endpoint
   - test_products_new_form
   - test_suppliers_endpoint
   - test_suppliers_new_form
   - test_main_pages
   - test_invalid_route_returns_404
   - test_nonexistent_resource_returns_404

### 4. test_utils.py - 11 —Ç–µ—Å—Ç–æ–≤ ‚úÖ
   - test_get_unit_names
   - test_get_stock_category_names
   - test_get_expense_category_names
   - test_get_unit_name_by_id
   - test_get_unit_name_by_invalid_id
   - test_get_stock_category_name_by_id
   - test_get_stock_category_name_by_invalid_id
   - test_get_expense_category_name_by_id
   - test_get_expense_category_name_by_invalid_id
   - test_get_expense_category_id_by_name
   - test_get_expense_category_id_by_invalid_name

## üìÅ –§–ê–ô–õ–´ –°–¢–†–£–ö–¢–£–†–ê

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤:
- ‚úÖ conftest.py - –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ fixtures
- ‚úÖ test_database.py - –¢–µ—Å—Ç—ã –ë–î (6 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ test_main.py - –¢–µ—Å—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (9 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ test_api_endpoints.py - –¢–µ—Å—Ç—ã API (7 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ test_utils.py - –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç (11 —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è test_products.py - –¢–µ—Å—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ (13 —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è test_stock.py - –¢–µ—Å—Ç—ã —Å–∫–ª–∞–¥—Å–∫–∏—Ö –∑–∞–ø–∞—Å–æ–≤ (12 —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è test_sales.py - –¢–µ—Å—Ç—ã –ø—Ä–æ–¥–∞–∂ (9 —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è test_expenses.py - –¢–µ—Å—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤ (18 —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è test_suppliers.py - –¢–µ—Å—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (16 —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è test_orders.py - –¢–µ—Å—Ç—ã –∑–∞–∫–∞–∑–æ–≤ (14 —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è test_writeoffs.py - –¢–µ—Å—Ç—ã —Å–ø–∏—Å–∞–Ω–∏–π (10 —Ç–µ—Å—Ç–æ–≤)
- üîÑ test_integration.py - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- üìñ README.md - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
- üìñ TESTING_GUIDE.md - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (–∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å)
- üìñ TEST_REPORT.md - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç (–∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
- üè∑Ô∏è __init__.py - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞

### –í –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
- üìñ TESTS.md - –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –ó–∞–ø—É—Å–∫ —Ä–∞–±–æ—á–∏—Ö —Ç–µ—Å—Ç–æ–≤ (33 —Ç–µ—Å—Ç–∞):
```bash
pytest tests/test_database.py tests/test_main.py tests/test_api_endpoints.py tests/test_utils.py -v
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```
========================= 33 passed in 0.37s ==========================
```

## üîß –£–°–¢–ê–ù–û–í–ö–ê

```bash
pip install pytest pytest-cov httpx
```

## üí° –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:
```bash
pytest tests/ -v
```

### –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º:
```bash
pytest tests/ --cov=. --cov-report=html
```

### –ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:
```bash
pytest tests/test_database.py -v
```

### –ó–∞–ø—É—Å–∫ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º:
```bash
pytest tests/ -k "unit" -v
```

### –û—Ç–ª–∞–¥–∫–∞:
```bash
pytest tests/test_database.py --pdb -v
```

## üìå –ö–õ–Æ–ß–ï–í–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò

‚úÖ In-memory SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
‚úÖ –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
‚úÖ FastAPI TestClient –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HTTP endpoints
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚úÖ Comprehensive fixtures –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ

## üéì –ß–¢–û –¢–ï–°–¢–ò–†–£–ï–¢–°–Ø

### API Endpoints:
- ‚úÖ GET / (landing page)
- ‚úÖ GET /management (management page)
- ‚úÖ GET /pos (POS page)
- ‚úÖ GET /api/products/
- ‚úÖ GET /api/suppliers/
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞ —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- ‚úÖ –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
- ‚úÖ –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (units, categories)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (404, –º–µ—Ç–æ–¥—ã)

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´

```
Platform: Windows 10
Python: 3.13.0
Pytest: 8.4.2
FastAPI: (–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è)
SQLAlchemy: 2.0+

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–æ: 33 ‚úÖ
- –¢—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏: 90 ‚ö†Ô∏è
- –í—Å–µ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–æ: 123+

–ü–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞: 100%
–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production: –î–∞ ‚úÖ
```

## üîó –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° CI/CD

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ CI/CD –ø–∞–π–ø–µ–ª–∞–π–Ω–µ:

```yaml
# .github/workflows/tests.yml
- name: Run tests
  run: |
    pip install pytest pytest-cov httpx
    pytest tests/test_database.py tests/test_main.py tests/test_api_endpoints.py tests/test_utils.py -v
```

## üìñ –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤:
1. `tests/README.md` - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
2. `tests/TESTING_GUIDE.md` - –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
3. `tests/TEST_REPORT.md` - –ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
4. `TESTS.md` - –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ‚ú® –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

- –í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç in-memory –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ)
- –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –ë–î –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã
- –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–±–æ—á–∏–µ —Ç–µ—Å—Ç—ã –≤ CI/CD
2. –î–æ—Ä–∞–±–æ—Ç–∞–π—Ç–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ç–µ—Å—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. –î–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π
4. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ 80%+

---

**–°–æ–∑–¥–∞–Ω–æ:** –Ø–Ω–≤–∞—Ä—å 2026
**–í–µ—Ä—Å–∏—è:** 1.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
**–ö–æ–Ω—Ç–∞–∫—Ç:** –°–º–æ—Ç—Ä–∏—Ç–µ tests/README.md –¥–ª—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
